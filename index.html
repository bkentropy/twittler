<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <div class="header">
      <h1>Twittler.inc</h1>
    </div>

    <div class='nav'>
        <p>Click here to get a new tweet!</p>
    </div>

    <div class="twit-feed">
      <script>
        $(document).ready(function(){

          // Structure: Create an input box
          $newTweeter = $('<div>');
          $('.nav').append($newTweeter);
          $newTweeter.html('<p>Type a tweet in the text box</p> \n' +
            '<form><input type="text" class="new-tweets"></form>');

          // Structure: Create the New Tweet button
          var $body = $('body');
          $('.twit-feed').html('');
          $button = $('<button>New Tweet!</button>');
          $('.nav > p').append($button);

          // Behavior: Click New Tweet to put addititional random tweets on the page.
          $button.on('click', function(){
              var index = streams.home.length - 1;
              var tweet = streams.home[index];
              var $tweet = $('<div></div>').attr('class', 'tweets');
              $tweet.html('@' + "<a href='#'>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
              $tweet.appendTo($('.twit-feed'));
          });

          // Structure: A button that will post all users
          $refreshTweets = $('<div>').attr('class', 'tweet-button');
          $('nav').append($refreshTweets);
          $refreshButton = $('<button>All users tweets</button>').attr('class', 'refresher');
          $('.nav').prepend($refreshButton);

          // Behavior: refresh the page to all users
          $refreshButton.on('click', function(){
            $('.twit-feed').html('');
            var index = streams.home.length - 1;
            while(index >= 0){
              var tweet = streams.home[index];
              var $tweet = $('<div></div>').attr('class', 'tweets').attr('id', tweet.user);
              $tweet.html('@' + "<a href='#'>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
              $tweet.appendTo($('.twit-feed'));
              index -= 1;
            }
          })

          // Populate the page with 10 random tweets.
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>').attr('class', 'tweets').attr('id', tweet.user);
            $tweet.html('@' + "<a href='#'>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
            $tweet.appendTo($('.twit-feed'));
            index -= 1;
          }


          //     ====== USER FILTER BUTTON SECTION ======
          // On click of a username return just that streams
          // streams.users.shawndrost = [];
          $shawndrost = $('#shawndrost');
          $shawndrost.on('click', function(){
            $('.twit-feed').html('');
            var index = streams.users.shawndrost.length - 1;
            while(index >= 0){
              var tweet = streams.users.shawndrost[index];
              var $tweet = $('<div></div>').attr('class', 'tweets').attr('id', tweet.user);
              $tweet.html('@' + "<a>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
              $tweet.appendTo($('.twit-feed'));
              index -= 1;
            }
          });
          // streams.users.sharksforcheap = [];
          $sharksforcheap = $('#sharksforcheap');
          $sharksforcheap.on('click', function(){
            $('.twit-feed').html('');
            var index = streams.users.sharksforcheap.length - 1;
            while(index >= 0){
              var tweet = streams.users.sharksforcheap[index];
              var $tweet = $('<div></div>').attr('class', 'tweets').attr('id', tweet.user);
              $tweet.html('@' + "<a>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
              $tweet.appendTo($('.twit-feed'));
              index -= 1;
            }
          });
          // streams.users.mracus = [];
          $mracus = $('#mracus');
          $mracus.on('click', function(){
            $('.twit-feed').html('');
            var index = streams.users.mracus.length - 1;
            while(index >= 0){
              var tweet = streams.users.mracus[index];
              var $tweet = $('<div></div>').attr('class', 'tweets').attr('id', tweet.user);
              $tweet.html('@' + "<a>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
              $tweet.appendTo($('.twit-feed'));
              index -= 1;
            }
          });
          // streams.users.douglascalhoun
          $douglascalhoun = $('#douglascalhoun');
          $douglascalhoun.on('click', function(){
            $('.twit-feed').html('');
            var index = streams.users.douglascalhoun.length - 1;
            while(index >= 0){
              var tweet = streams.users.douglascalhoun[index];
              var $tweet = $('<div></div>').attr('class', 'tweets').attr('id', tweet.user);
              $tweet.html('@' + "<a>" + tweet.user + '</a>' + ': ' + tweet.message + '<br>' + new Date());
              $tweet.appendTo($('.twit-feed'));
              index -= 1;
            }
          });

        });

      </script>
    </div>

    <div class='footer'>
    </div>

  </body>
</html>
